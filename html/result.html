<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
    <title>诺禾致源</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/loadSimple.css">
    <link rel="stylesheet" href="../css/ionicons.min.css">
    <style>
        body {
            background: #eeeeee;
        }
    </style>
<body>
<div id='app'>
    <nuohe-header></nuohe-header>

    <div id='result'>

        <!-- 整个标题加上菜单 -->
        <div class='resultTitle'>
            {{menuArray[abilityId]}}详情
            <span class='menuBtn ion-navicon' @click='menuToggle'></span>
            <div class='menuListUl' v-show='ifMenuShow'>
                <template v-for='(item,index) in menuArray'>
                    <div @click='changeMenu($event,index)' class='menuListLi' :class="(index==abilityId)?'current':'' ">
                        {{item}}
                    </div>
                </template>
            </div>
        </div>

        <!--table和circle图的能力section-->
        <result-ability></result-ability>

        <div class='resultSection'>
            <div class="resultHeader">美肤指导</div>
            <div class="resultContent">
                <div class='resultTitleBg'>护肤建议</div>
                <div>优选成分</div>
                <honey-comb></honey-comb>
                <div>产品建议</div>
                <div>123</div>

                <div class='resultTitleBg'>其它建议</div>
                <div class='adviseOther'>
                    <span>SLS</span><span>SLES</span><span>皂基</span><span>薄荷</span>
                </div>
            </div>
        </div>


        <!-- 机理 -->
        <result-principle></result-principle>
    </div>

    <div id='footerBtns'>
        <span @click='toLeft($event)' class='toLeft' v-if='abilityId>0'><i class='ion-chevron-left'></i>{{menuArray[abilityId-1]}}</span>
        <span @click='toRight($event)' class='toRight' v-if='abilityId<menuArray.length-1'>{{menuArray[parseInt(abilityId)+1]}}<i
                class='ion-chevron-right'></i></span>
        <div style='clear: both;'></div>
    </div>
</div>


<script src='../js/vue.min.js'></script>
<script src='../js/jquery.min.js'></script>
<script src='../js/fastclick.js'></script>
<script src='../js/require.min.js'></script>
<script src='../js/controller.js'></script>
<script src='../js/jquery.peity.min.js'></script>
<script>
    $(function () {
        window.searchJson = searchJson = window.location.search.searchToJson();
        if (!window.searchJson.id) window.location.search = 'id=0';//默认抗敏感能力...
        FastClick.attach(document.body);


        window.BUS = new Vue({});

        var vm = new Vue({
            el: '#app',
            data: {
                abilityId: 0,
                ifMenuShow: false,
                menuArray: ['黑色素生成能力', '抗衰老能力', '抗敏感能力', '抵御粉刺能力', '抗胶原蛋白流失能力', '抵御妊娠纹能力', '维生素吸收代谢能力'],


                resultAbility: [{},],
                resultAbility: [{},],
                resultAbility: [{},],
            },
            methods: {
                menuToggle: function () {
                    this.ifMenuShow = !this.ifMenuShow;
                },
                changeMenu: function (e, index) {
                    location.href = 'result.html?id=' + index;
                },
                toLeft: function () {
                    var that = this;
                    that.changeMenu(null, parseInt(that.abilityId) - 1);
                },
                toRight: function () {
                    var that = this;
                    that.changeMenu(null, parseInt(that.abilityId) + 1);
                },
            },
            components: {
                'nuohe-header': function (resolve) {
                    require(['../components/nuoheHeader.js'],
                        function () {
                            resolve(nuoheHeader);
                        })
                },
                'result-ability': function (resolve) {
                    require(['../components/resultAbility.js'],
                        function () {
                            resolve(resultAbility);
                        })
                },
                'result-principle': function (resolve) {
                    require(['../components/resultPrinciple.js'],
                        function () {
                            resolve(resultPrinciple);
                        })
                },
                'honey-comb': function (resolve) {
                    require(['../components/honeyComb.js'],
                        function () {
                            resolve(honeyComb);
                        })
                },
            },
            created: function () {
                var that = this;

                //根据url更新全局索引...
                this.abilityId = searchJson.id;

            },
            mounted: function () {
                var that = this;
            }
        });

        window.vm = vm;


    })
</script>
</body>
</html>